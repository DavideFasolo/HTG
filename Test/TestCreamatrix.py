import unittest

from aprifiles import ReturnFile
from creamatrix import leggivda


class TestCreamatrix(unittest.TestCase):

    def test_read_vda(self):
        expected = [(6.0, -51.655, 83.781, -15.777), (6.0, -33.943, 83.781, -3.655), (6.0, 33.277, 83.781, -3.655), (6.0, 50.989, 83.781, -15.777), (8.0, -131.855, 0.366, -19.547), (8.0, -131.855, 83.781, -16.537), (8.0, 131.195, 0.366, -19.547), (8.0, 131.195, 83.781, -16.537), (10.0, -20.0, 0.0, -87.235), (10.0, 0.0, -22.0, -87.235), (10.0, 0.0, 22.0, -87.235), (10.0, 20.0, 0.0, -87.235), (12.0, -131.855, 30.366, -12.363), (12.0, -129.32, -81.337, -32.463), (12.0, -117.992, 125.227, -5.859), (12.0, -115.809, -131.312, -12.363), (12.0, -41.855, -134.634, -12.363), (12.0, -21.855, 126.366, 9.347), (12.0, 44.403, -134.611, -25.428), (12.0, 77.802, 126.768, -12.363), (12.0, 131.189, -134.634, 0.2), (12.0, 131.189, -54.634, -12.363), (12.0, 131.189, 40.366, -12.363), (12.0, 131.189, 126.366, -6.333), (16.0, -125.0, -200.0, 0.0), (16.0, -125.0, 200.0, 0.0), (16.0, 125.0, -200.0, 0.0), (16.0, 125.0, 200.0, 0.0)]
        actual = leggivda(ReturnFile("path", "filename", open("valid.vda", "r")), 3)

        self.assertIs(len(actual), 28, "actual holes should be 28")
        self.assertAlmostEqual(actual, expected, "actual holes different from expected ones")

